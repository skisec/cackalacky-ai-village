# How to Train Your Llama: Easy RAG with Open-WebUI

This directory provides a beginner-friendly guide and resources for getting started with Retrieval Augmented Generation (RAG) using [Open-WebUI](https://openwebui.com/). We'll use MITRE ATT&CK data as a practical example to demonstrate how to prepare and use your own knowledge base.

## Table of Contents
- [How to Train Your Llama: Easy RAG with Open-WebUI](#how-to-train-your-llama-easy-rag-with-open-webui)
  - [Table of Contents](#table-of-contents)
  - [Overview](#overview)
    - [What is RAG?](#what-is-rag)
    - [What is Open-WebUI?](#what-is-open-webui)
  - [Prerequisites](#prerequisites)
  - [Usage Workflow: MITRE ATT&CK Knowledge Base](#usage-workflow-mitre-attck-knowledge-base)
    - [1. Generate Markdown Files](#1-generate-markdown-files)
    - [2. Upload to Open-WebUI](#2-upload-to-open-webui)
    - [3. Query Your Knowledge](#3-query-your-knowledge)
  - [Directory Contents](#directory-contents)
  - [Official Documentation & Further Resources](#official-documentation--further-resources)

## Overview

This guide is designed for individuals new to Large Language Models (LLMs) and RAG applications. Our goal is to provide a simple, hands-on example of how to leverage Open-WebUI's built-in RAG capabilities to chat with your own documents.

### What is RAG?

Retrieval Augmented Generation (RAG) is a technique that enhances the responses of LLMs by allowing them to access and incorporate information from external knowledge sources. Instead of relying solely on its training data, an LLM can retrieve relevant documents or data snippets and use them to generate more accurate, up-to-date, and contextually appropriate answers.

### What is Open-WebUI?

[Open-WebUI](https://openwebui.com/) is a user-friendly, extensible, and self-hosted interface for interacting with various LLMs (like those available through Ollama). It offers robust features, including a powerful RAG system that allows you to easily upload documents and use them as a knowledge base for your chat interactions.

## Prerequisites

*   An installed instance of [Open-WebUI](https://docs.openwebui.com/getting-started/quick-start/).
*   Python 3.x environment (to run the Jupyter notebook).
*   Jupyter Notebook or JupyterLab to open and run the `.ipynb` file.
    *   *Note: The notebook includes commands to install necessary Python packages like `attackcti` and `jinja2`.*

## Usage Workflow: MITRE ATT&CK Knowledge Base

We will use data from the [MITRE ATT&CK framework](https://attack.mitre.org/) to create a sample knowledge base. The included Jupyter notebook, `mitre_rag_prep.ipynb`, automates the process of fetching and converting ATT&CK data (Tactics, Techniques, and Groups) into markdown files suitable for Open-WebUI.

### 1. Generate Markdown Files

*   Open and run the `mitre_rag_prep.ipynb` notebook located in this directory.
*   This notebook will:
    *   Fetch the latest STIX data for MITRE ATT&CK Enterprise (using the `attackcti` Python package).
    *   Process the data for Tactics, Techniques (and sub-techniques), and Groups.
    *   Generate individual markdown files for each item and save them into the `knowledge/` directory.
    *   (The `templates/` directory contains Jinja2 templates used for formatting these markdown files.)

### 2. Upload to Open-WebUI

Once the markdown files are generated in the `knowledge/` directory:

*   Access your Open-WebUI instance.
*   Open the Workspace menu and navigate to the "Knowledge" section.
*   Create a new knowledge collection
*   Use the interface to upload the markdown files from the `knowledge/` directory. You can typically upload multiple files or create a document collection pointing to this folder.
*   Open-WebUI will process and index these documents, making them available for RAG.
*   Repeat the process for Tactics, Techniques, and Groups.
*   _Note: Open-WebUI's RAG functionality is versatile. Beyond the markdown files generated by the notebook, you can also upload other common document formats such as PDFs, text files (.txt), and potentially CSVs (check the official Open-WebUI documentation for the latest supported file types and best practices). This allows you to build diverse knowledge bases from various sources like threat reports, research papers, or blog posts._

### 3. Query Your Knowledge

*   Start a new chat in Open-WebUI.
*   When initiating the chat or through chat settings, ensure you select or enable the RAG functionality, often by choosing the document collection you just created (e.g., by typing `#` followed by the collection name or using a UI element).
*   You can now ask questions related to MITRE ATT&CK. For example:
    *   "What are some techniques used in the Initial Access tactic?"
    *   "Tell me about the group APT28."
    *   "Which tactics does the technique 'Phishing' belong to?"
*   Open-WebUI will retrieve relevant information from your uploaded MITRE ATT&CK documents to answer your questions.

## Directory Contents

*   `README.md`: This file.
*   `mitre_rag_prep.ipynb`: Jupyter notebook that uses the `attackcti` Python package to download and convert MITRE ATT&CK STIX data into markdown files. This can be used to regenerate or customize the knowledge base.
*   `knowledge/`: Contains pre-generated markdown files for MITRE ATT&CK Tactics, Techniques, and Groups, ready for upload to Open-WebUI. These files serve as the example knowledge base. You can (re)generate these using the `mitre_rag_prep.ipynb` notebook.
*   `templates/`: Contains Jinja2 templates used by `mitre_rag_prep.ipynb` to structure the markdown output for each ATT&CK item.

## Official Documentation & Further Resources

*   **Open-WebUI:**
    *   [Official Website](https://openwebui.com/)
    *   [GitHub Repository](https://github.com/open-webui/open-webui)
    *   [Documentation](https://docs.openwebui.com/)
*   **MITRE ATT&CK:**
    *   [Official Website](https://attack.mitre.org/)
*   **attackcti Python Package:**
    *   [GitHub Repository (OTRF/ATTACK-Python-Client)](https://github.com/OTRF/ATTACK-Python-Client)
*   **Further Exploration Ideas:**
    *   Experiment with different types of documents (e.g., PDFs, .txt files) for your Open-WebUI knowledge base.
    *   Explore advanced RAG settings and chunking strategies in Open-WebUI if available.
    *   Consider how RAG could be applied to your own projects, research, or areas of interest.
    *   Modify the `mitre_rag_prep.ipynb` notebook to include other MITRE ATT&CK objects (e.g., Software, Mitigations) or data from different sources.
